"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/*
 * jquery-gpopover
 * http://github.com/markembling/jquery-gpopover
 *
 * A simple jQuery plugin for creating popover elements similar to Google's
 * new 'apps' launcher/switcher.
 *
 * Copyright (c) 2013 Mark Embling (markembling.info)
 * Licensed under the BSD (3 clause) license.
 */
(function ($) {
  var GPopover = function GPopover(element, options) {
    this.options = null;
    this.$trigger = null;
    this.$popover = null;
    this.init(element, options);
  };

  GPopover.prototype.init = function (element, options) {
    var that = this;
    this.options = $.extend({}, $.fn.gpopover.defaults, options);
    this.$trigger = $(element);
    this.$popover = $('#' + this.$trigger.data('popover'));

    this._addArrowElements();

    if (this.options.preventHide) {
      this._preventHideClickPropagation();
    }

    this.$trigger.click(function (e) {
      if (!that.$popover.is(':visible')) {
        // Trigger a click on the parent element (that can bubble up)
        $(this).parent().click();
        that.show();
        e.stopPropagation();
      }

      e.preventDefault();
    });
  };

  GPopover.prototype.show = function () {
    var that = this; // Set width before showing

    this.$popover.width(this.options.width); // Show the popover

    this.$popover.fadeIn(this.options.fadeInDuration); // Set up hiding

    $(document).one('click.popoverHide', function () {
      // _hidePopover($popover, settings);
      that.hide();
    }); // Sort out the position (must be done after showing)

    var triggerPos = this.$trigger.offset();
    this.$popover.offset({
      left: triggerPos.left + this.$trigger.outerWidth() / 2 - this.$popover.outerWidth() / 2,
      //top: triggerPos.top + this.$trigger.outerHeight() + 10,
      top: triggerPos.top - this.$popover.outerHeight() - 10 // the final 10 above allows room for the arrow below it

    }); // Check and reposition if out of the viewport

    var positionXCorrection = this._repositionForViewportSides(); // Set the position of the arrow elements


    this._setArrowPosition(positionXCorrection); // Call the callback


    this.options.onShow.call(this.$trigger, this.$popover);
  };

  GPopover.prototype.hide = function () {
    // Hide the popover
    this.$popover.fadeOut(this.options.fadeOutDuration); // Call the callback

    this.options.onHide.call(this.$trigger, this.$popover);
  };

  GPopover.prototype._addArrowElements = function () {
    this.$arrow = $('<div class="gpopover-arrow"></div>');
    this.$arrowShadow = $('<div class="gpopover-arrow-shadow"></div>');
    this.$popover.append(this.$arrow);
    this.$popover.append(this.$arrowShadow);
  };

  GPopover.prototype._preventHideClickPropagation = function () {
    /* Prevent clicks within the popover from being propagated
             to the document (and thus stop the popover from being
             hidden) */
    this.$popover.click(function (e) {
      e.stopPropagation();
    });
  };

  GPopover.prototype._repositionForViewportSides = function () {
    var popoverOffsetLeft = this.$popover.offset().left,
        positionXCorrection = 0;
    var $window = $(window); // Right edge

    if (popoverOffsetLeft + this.$popover.outerWidth() + this.options.viewportSideMargin > $window.width()) {
      var rightEdgeCorrection = -(popoverOffsetLeft + this.$popover.outerWidth() + this.options.viewportSideMargin - $window.width());
      popoverOffsetLeft = popoverOffsetLeft + rightEdgeCorrection;
      positionXCorrection = rightEdgeCorrection;
    } // Left edge


    if (popoverOffsetLeft < this.options.viewportSideMargin) {
      var leftEdgeCorrection = this.options.viewportSideMargin - popoverOffsetLeft;
      popoverOffsetLeft = popoverOffsetLeft + leftEdgeCorrection;
      positionXCorrection += leftEdgeCorrection;
    } // Reposition the popover element if necessary


    if (positionXCorrection !== 0) {
      this.$popover.offset({
        left: popoverOffsetLeft
      });
    }

    return positionXCorrection;
  };

  GPopover.prototype._setArrowPosition = function (positionXCorrection) {
    var leftposition = this.$popover.outerWidth() / 2 - this.$arrow.outerWidth() / 2 - positionXCorrection;
    this.$arrow.css({
      bottom: -7,
      left: leftposition
    });
    this.$arrowShadow.css({
      bottom: -8,
      left: leftposition
    });
  };

  $.fn.gpopover = function (option) {
    return this.each(function () {
      var $this = $(this),
          options = _typeof(option) === 'object' && option;
      var data = $this.data('gpopover'); // Initialise if not already done

      if (!data) {
        data = new GPopover(this, options);
        $this.data('gpopover', data);
      } // If the option parameter was a string, trigger the named function


      if (typeof option === 'string') {
        data[option]();
      }
    });
  }; // Default settings


  $.fn.gpopover.defaults = {
    width: 250,
    // Width of the popover
    fadeInDuration: 65,
    // Duration of popover fade-in animation
    fadeOutDuration: 65,
    // Duration of popover fade-out animation
    viewportSideMargin: 10,
    // Space to leave the side if out the viewport
    preventHide: false,
    // Prevent hide when clicking within popover
    onShow: function onShow() {},
    // Called upon showing the popover
    onHide: function onHide() {} // Called upon hiding the popover

  };
})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5ncG9wb3Zlci5qcyJdLCJuYW1lcyI6WyIkIiwiR1BvcG92ZXIiLCJlbGVtZW50Iiwib3B0aW9ucyIsIiR0cmlnZ2VyIiwiJHBvcG92ZXIiLCJpbml0IiwicHJvdG90eXBlIiwidGhhdCIsImV4dGVuZCIsImZuIiwiZ3BvcG92ZXIiLCJkZWZhdWx0cyIsImRhdGEiLCJfYWRkQXJyb3dFbGVtZW50cyIsInByZXZlbnRIaWRlIiwiX3ByZXZlbnRIaWRlQ2xpY2tQcm9wYWdhdGlvbiIsImNsaWNrIiwiZSIsImlzIiwicGFyZW50Iiwic2hvdyIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0Iiwid2lkdGgiLCJmYWRlSW4iLCJmYWRlSW5EdXJhdGlvbiIsImRvY3VtZW50Iiwib25lIiwiaGlkZSIsInRyaWdnZXJQb3MiLCJvZmZzZXQiLCJsZWZ0Iiwib3V0ZXJXaWR0aCIsInRvcCIsIm91dGVySGVpZ2h0IiwicG9zaXRpb25YQ29ycmVjdGlvbiIsIl9yZXBvc2l0aW9uRm9yVmlld3BvcnRTaWRlcyIsIl9zZXRBcnJvd1Bvc2l0aW9uIiwib25TaG93IiwiY2FsbCIsImZhZGVPdXQiLCJmYWRlT3V0RHVyYXRpb24iLCJvbkhpZGUiLCIkYXJyb3ciLCIkYXJyb3dTaGFkb3ciLCJhcHBlbmQiLCJwb3BvdmVyT2Zmc2V0TGVmdCIsIiR3aW5kb3ciLCJ3aW5kb3ciLCJ2aWV3cG9ydFNpZGVNYXJnaW4iLCJyaWdodEVkZ2VDb3JyZWN0aW9uIiwibGVmdEVkZ2VDb3JyZWN0aW9uIiwibGVmdHBvc2l0aW9uIiwiY3NzIiwiYm90dG9tIiwib3B0aW9uIiwiZWFjaCIsIiR0aGlzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Ozs7Ozs7QUFXRSxXQUFVQSxDQUFWLEVBQWM7QUFDZixNQUFNQyxRQUFRLEdBQUcsU0FBWEEsUUFBVyxDQUFVQyxPQUFWLEVBQW1CQyxPQUFuQixFQUE2QjtBQUM3QyxTQUFLQSxPQUFMLEdBQWUsSUFBZjtB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d0Isb0JBUWYsQ0FBRyxDQVJZLENBUVY7O0FBUlUsR0FBekI7QUFVQSxDQTdMQyxFQTZMQ2dCLE1BN0xELENBQUYiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICoganF1ZXJ5LWdwb3BvdmVyXG4gKiBodHRwOi8vZ2l0aHViLmNvbS9tYXJrZW1ibGluZy9qcXVlcnktZ3BvcG92ZXJcbiAqXG4gKiBBIHNpbXBsZSBqUXVlcnkgcGx1Z2luIGZvciBjcmVhdGluZyBwb3BvdmVyIGVsZW1lbnRzIHNpbWlsYXIgdG8gR29vZ2xlJ3NcbiAqIG5ldyAnYXBwcycgbGF1bmNoZXIvc3dpdGNoZXIuXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEzIE1hcmsgRW1ibGluZyAobWFya2VtYmxpbmcuaW5mbylcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgKDMgY2xhdXNlKSBsaWNlbnNlLlxuICovXG5cbiggZnVuY3Rpb24oICQgKSB7XG5cdGNvbnN0IEdQb3BvdmVyID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbnMgKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gbnVsbDtcblx0XHR0aGlzLiR0cmlnZ2VyID0gbnVsbDtcblx0XHR0aGlzLiRwb3BvdmVyID0gbnVsbDtcblxuXHRcdHRoaXMuaW5pdCggZWxlbWVudCwgb3B0aW9ucyApO1xuXHR9O1xuXG5cdEdQb3BvdmVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbnMgKSB7XG5cdFx0Y29uc3QgdGhhdCA9IHRoaXM7XG5cblx0XHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCgge30sICQuZm4uZ3BvcG92ZXIuZGVmYXVsdHMsIG9wdGlvbnMgKTtcblxuXHRcdHRoaXMuJHRyaWdnZXIgPSAkKCBlbGVtZW50ICk7XG5cdFx0dGhpcy4kcG9wb3ZlciA9ICQoICcjJyArIHRoaXMuJHRyaWdnZXIuZGF0YSggJ3BvcG92ZXInICkgKTtcblxuXHRcdHRoaXMuX2FkZEFycm93RWxlbWVudHMoKTtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnByZXZlbnRIaWRlICkge1xuXHRcdFx0dGhpcy5fcHJldmVudEhpZGVDbGlja1Byb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy4kdHJpZ2dlci5jbGljayggZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRpZiAoICEgdGhhdC4kcG9wb3Zlci5pcyggJzp2aXNpYmxlJyApICkge1xuXHRcdFx0XHQvLyBUcmlnZ2VyIGEgY2xpY2sgb24gdGhlIHBhcmVudCBlbGVtZW50ICh0aGF0IGNhbiBidWJibGUgdXApXG5cdFx0XHRcdCQoIHRoaXMgKVxuXHRcdFx0XHRcdC5wYXJlbnQoKVxuXHRcdFx0XHRcdC5jbGljaygpO1xuXG5cdFx0XHRcdHRoYXQuc2hvdygpO1xuXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9ICk7XG5cdH07XG5cblx0R1BvcG92ZXIucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbigpIHtcblx0XHRjb25zdCB0aGF0ID0gdGhpcztcblxuXHRcdC8vIFNldCB3aWR0aCBiZWZvcmUgc2hvd2luZ1xuXHRcdHRoaXMuJHBvcG92ZXIud2lkdGgoIHRoaXMub3B0aW9ucy53aWR0aCApO1xuXG5cdFx0Ly8gU2hvdyB0aGUgcG9wb3ZlclxuXHRcdHRoaXMuJHBvcG92ZXIuZmFkZUluKCB0aGlzLm9wdGlvbnMuZmFkZUluRHVyYXRpb24gKTtcblxuXHRcdC8vIFNldCB1cCBoaWRpbmdcblx0XHQkKCBkb2N1bWVudCApLm9uZSggJ2NsaWNrLnBvcG92ZXJIaWRlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBfaGlkZVBvcG92ZXIoJHBvcG92ZXIsIHNldHRpbmdzKTtcblx0XHRcdHRoYXQuaGlkZSgpO1xuXHRcdH0gKTtcblxuXHRcdC8vIFNvcnQgb3V0IHRoZSBwb3NpdGlvbiAobXVzdCBiZSBkb25lIGFmdGVyIHNob3dpbmcpXG5cdFx0Y29uc3QgdHJpZ2dlclBvcyA9IHRoaXMuJHRyaWdnZXIub2Zmc2V0KCk7XG5cdFx0dGhpcy4kcG9wb3Zlci5vZmZzZXQoIHtcblx0XHRcdGxlZnQ6XG5cdFx0XHRcdHRyaWdnZXJQb3MubGVmdCArXG5cdFx0XHRcdCggdGhpcy4kdHJpZ2dlci5vdXRlcldpZHRoKCkgLyAyICkgLVxuXHRcdFx0XHQoIHRoaXMuJHBvcG92ZXIub3V0ZXJXaWR0aCgpIC8gMiApLFxuXHRcdFx0Ly90b3A6IHRyaWdnZXJQb3MudG9wICsgdGhpcy4kdHJpZ2dlci5vdXRlckhlaWdodCgpICsgMTAsXG5cdFx0XHR0b3A6IHRyaWdnZXJQb3MudG9wIC0gdGhpcy4kcG9wb3Zlci5vdXRlckhlaWdodCgpIC0gMTAsXG5cdFx0XHQvLyB0aGUgZmluYWwgMTAgYWJvdmUgYWxsb3dzIHJvb20gZm9yIHRoZSBhcnJvdyBiZWxvdyBpdFxuXHRcdH0gKTtcblxuXHRcdC8vIENoZWNrIGFuZCByZXBvc2l0aW9uIGlmIG91dCBvZiB0aGUgdmlld3BvcnRcblx0XHRjb25zdCBwb3NpdGlvblhDb3JyZWN0aW9uID0gdGhpcy5fcmVwb3NpdGlvbkZvclZpZXdwb3J0U2lkZXMoKTtcblxuXHRcdC8vIFNldCB0aGUgcG9zaXRpb24gb2YgdGhlIGFycm93IGVsZW1lbnRzXG5cdFx0dGhpcy5fc2V0QXJyb3dQb3NpdGlvbiggcG9zaXRpb25YQ29ycmVjdGlvbiApO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgY2FsbGJhY2tcblx0XHR0aGlzLm9wdGlvbnMub25TaG93LmNhbGwoIHRoaXMuJHRyaWdnZXIsIHRoaXMuJHBvcG92ZXIgKTtcblx0fTtcblxuXHRHUG9wb3Zlci5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIEhpZGUgdGhlIHBvcG92ZXJcblx0XHR0aGlzLiRwb3BvdmVyLmZhZGVPdXQoIHRoaXMub3B0aW9ucy5mYWRlT3V0RHVyYXRpb24gKTtcblxuXHRcdC8vIENhbGwgdGhlIGNhbGxiYWNrXG5cdFx0dGhpcy5vcHRpb25zLm9uSGlkZS5jYWxsKCB0aGlzLiR0cmlnZ2VyLCB0aGlzLiRwb3BvdmVyICk7XG5cdH07XG5cblx0R1BvcG92ZXIucHJvdG90eXBlLl9hZGRBcnJvd0VsZW1lbnRzID0gZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy4kYXJyb3cgPSAkKCAnPGRpdiBjbGFzcz1cImdwb3BvdmVyLWFycm93XCI+PC9kaXY+JyApO1xuXHRcdHRoaXMuJGFycm93U2hhZG93ID0gJCggJzxkaXYgY2xhc3M9XCJncG9wb3Zlci1hcnJvdy1zaGFkb3dcIj48L2Rpdj4nICk7XG5cblx0XHR0aGlzLiRwb3BvdmVyLmFwcGVuZCggdGhpcy4kYXJyb3cgKTtcblx0XHR0aGlzLiRwb3BvdmVyLmFwcGVuZCggdGhpcy4kYXJyb3dTaGFkb3cgKTtcblx0fTtcblxuXHRHUG9wb3Zlci5wcm90b3R5cGUuX3ByZXZlbnRIaWRlQ2xpY2tQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdC8qIFByZXZlbnQgY2xpY2tzIHdpdGhpbiB0aGUgcG9wb3ZlciBmcm9tIGJlaW5nIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgdG8gdGhlIGRvY3VtZW50IChhbmQgdGh1cyBzdG9wIHRoZSBwb3BvdmVyIGZyb20gYmVpbmdcbiAgICAgICAgICAgaGlkZGVuKSAqL1xuXHRcdHRoaXMuJHBvcG92ZXIuY2xpY2soIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9ICk7XG5cdH07XG5cblx0R1BvcG92ZXIucHJvdG90eXBlLl9yZXBvc2l0aW9uRm9yVmlld3BvcnRTaWRlcyA9IGZ1bmN0aW9uKCkge1xuXHRcdGxldCBwb3BvdmVyT2Zmc2V0TGVmdCA9IHRoaXMuJHBvcG92ZXIub2Zmc2V0KCkubGVmdCxcblx0XHRcdHBvc2l0aW9uWENvcnJlY3Rpb24gPSAwO1xuXG5cdFx0Y29uc3QgJHdpbmRvdyA9ICQoIHdpbmRvdyApO1xuXG5cdFx0Ly8gUmlnaHQgZWRnZVxuXHRcdGlmIChcblx0XHRcdHBvcG92ZXJPZmZzZXRMZWZ0ICtcblx0XHRcdHRoaXMuJHBvcG92ZXIub3V0ZXJXaWR0aCgpICtcblx0XHRcdHRoaXMub3B0aW9ucy52aWV3cG9ydFNpZGVNYXJnaW4gPlxuXHRcdFx0JHdpbmRvdy53aWR0aCgpXG5cdFx0KSB7XG5cdFx0XHRjb25zdCByaWdodEVkZ2VDb3JyZWN0aW9uID0gLShcblx0XHRcdFx0cG9wb3Zlck9mZnNldExlZnQgK1xuXHRcdFx0XHR0aGlzLiRwb3BvdmVyLm91dGVyV2lkdGgoKSArXG5cdFx0XHRcdHRoaXMub3B0aW9ucy52aWV3cG9ydFNpZGVNYXJnaW4gLVxuXHRcdFx0XHQkd2luZG93LndpZHRoKClcblx0XHRcdCk7XG5cdFx0XHRwb3BvdmVyT2Zmc2V0TGVmdCA9IHBvcG92ZXJPZmZzZXRMZWZ0ICsgcmlnaHRFZGdlQ29ycmVjdGlvbjtcblxuXHRcdFx0cG9zaXRpb25YQ29ycmVjdGlvbiA9IHJpZ2h0RWRnZUNvcnJlY3Rpb247XG5cdFx0fVxuXG5cdFx0Ly8gTGVmdCBlZGdlXG5cdFx0aWYgKCBwb3BvdmVyT2Zmc2V0TGVmdCA8IHRoaXMub3B0aW9ucy52aWV3cG9ydFNpZGVNYXJnaW4gKSB7XG5cdFx0XHRjb25zdCBsZWZ0RWRnZUNvcnJlY3Rpb24gPVxuXHRcdFx0XHR0aGlzLm9wdGlvbnMudmlld3BvcnRTaWRlTWFyZ2luIC0gcG9wb3Zlck9mZnNldExlZnQ7XG5cdFx0XHRwb3BvdmVyT2Zmc2V0TGVmdCA9IHBvcG92ZXJPZmZzZXRMZWZ0ICsgbGVmdEVkZ2VDb3JyZWN0aW9uO1xuXG5cdFx0XHRwb3NpdGlvblhDb3JyZWN0aW9uICs9IGxlZnRFZGdlQ29ycmVjdGlvbjtcblx0XHR9XG5cblx0XHQvLyBSZXBvc2l0aW9uIHRoZSBwb3BvdmVyIGVsZW1lbnQgaWYgbmVjZXNzYXJ5XG5cdFx0aWYgKCBwb3NpdGlvblhDb3JyZWN0aW9uICE9PSAwICkge1xuXHRcdFx0dGhpcy4kcG9wb3Zlci5vZmZzZXQoIHsgbGVmdDogcG9wb3Zlck9mZnNldExlZnQgfSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBwb3NpdGlvblhDb3JyZWN0aW9uO1xuXHR9O1xuXG5cdEdQb3BvdmVyLnByb3RvdHlwZS5fc2V0QXJyb3dQb3NpdGlvbiA9IGZ1bmN0aW9uKCBwb3NpdGlvblhDb3JyZWN0aW9uICkge1xuXHRcdGNvbnN0IGxlZnRwb3NpdGlvbiA9XG5cdFx0XHQoIHRoaXMuJHBvcG92ZXIub3V0ZXJXaWR0aCgpIC8gMiApIC1cblx0XHRcdCggdGhpcy4kYXJyb3cub3V0ZXJXaWR0aCgpIC8gMiApIC1cblx0XHRcdHBvc2l0aW9uWENvcnJlY3Rpb247XG5cblx0XHR0aGlzLiRhcnJvdy5jc3MoIHtcblx0XHRcdGJvdHRvbTogLTcsXG5cdFx0XHRsZWZ0OiBsZWZ0cG9zaXRpb24sXG5cdFx0fSApO1xuXHRcdHRoaXMuJGFycm93U2hhZG93LmNzcygge1xuXHRcdFx0Ym90dG9tOiAtOCxcblx0XHRcdGxlZnQ6IGxlZnRwb3NpdGlvbixcblx0XHR9ICk7XG5cdH07XG5cblx0JC5mbi5ncG9wb3ZlciA9IGZ1bmN0aW9uKCBvcHRpb24gKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRjb25zdCAkdGhpcyA9ICQoIHRoaXMgKSxcblx0XHRcdFx0b3B0aW9ucyA9IHR5cGVvZiBvcHRpb24gPT09ICdvYmplY3QnICYmIG9wdGlvbjtcblxuXHRcdFx0bGV0IGRhdGEgPSAkdGhpcy5kYXRhKCAnZ3BvcG92ZXInICk7XG5cblx0XHRcdC8vIEluaXRpYWxpc2UgaWYgbm90IGFscmVhZHkgZG9uZVxuXHRcdFx0aWYgKCAhIGRhdGEgKSB7XG5cdFx0XHRcdGRhdGEgPSBuZXcgR1BvcG92ZXIoIHRoaXMsIG9wdGlvbnMgKTtcblx0XHRcdFx0JHRoaXMuZGF0YSggJ2dwb3BvdmVyJywgZGF0YSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB0aGUgb3B0aW9uIHBhcmFtZXRlciB3YXMgYSBzdHJpbmcsIHRyaWdnZXIgdGhlIG5hbWVkIGZ1bmN0aW9uXG5cdFx0XHRpZiAoIHR5cGVvZiBvcHRpb24gPT09ICdzdHJpbmcnICkge1xuXHRcdFx0XHRkYXRhWyBvcHRpb24gXSgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fTtcblxuXHQvLyBEZWZhdWx0IHNldHRpbmdzXG5cdCQuZm4uZ3BvcG92ZXIuZGVmYXVsdHMgPSB7XG5cdFx0d2lkdGg6IDI1MCwgLy8gV2lkdGggb2YgdGhlIHBvcG92ZXJcblx0XHRmYWRlSW5EdXJhdGlvbjogNjUsIC8vIER1cmF0aW9uIG9mIHBvcG92ZXIgZmFkZS1pbiBhbmltYXRpb25cblx0XHRmYWRlT3V0RHVyYXRpb246IDY1LCAvLyBEdXJhdGlvbiBvZiBwb3BvdmVyIGZhZGUtb3V0IGFuaW1hdGlvblxuXHRcdHZpZXdwb3J0U2lkZU1hcmdpbjogMTAsIC8vIFNwYWNlIHRvIGxlYXZlIHRoZSBzaWRlIGlmIG91dCB0aGUgdmlld3BvcnRcblx0XHRwcmV2ZW50SGlkZTogZmFsc2UsIC8vIFByZXZlbnQgaGlkZSB3aGVuIGNsaWNraW5nIHdpdGhpbiBwb3BvdmVyXG5cblx0XHRvblNob3coKSB7IH0sIC8vIENhbGxlZCB1cG9uIHNob3dpbmcgdGhlIHBvcG92ZXJcblx0XHRvbkhpZGUoKSB7IH0sIC8vIENhbGxlZCB1cG9uIGhpZGluZyB0aGUgcG9wb3ZlclxuXHR9O1xufSggalF1ZXJ5ICkgKTtcbiJdLCJmaWxlIjoianF1ZXJ5Lmdwb3BvdmVyLm1pbi5qcyJ9